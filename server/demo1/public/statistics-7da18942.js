webpackJsonp([13],{275:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,a,l){return a&&e(t.prototype,a),l&&e(t,l),t}}(),r=a(1),m=l(r),u=a(7),f=l(u),d=a(11),o=(l(d),a(13),a(132)),g=(l(o),a(22)),E=l(g),N=a(563),h=l(N),v=a(59),T=a(131),p=function(e){function t(e){return s(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return n(t,e),c(t,[{key:"render",value:function(){return m.default.createElement("div",{id:"sidebar_nav"},m.default.createElement("ul",null,m.default.createElement("li",null,m.default.createElement(v.Link,{to:"statistics/index",activeClassName:"active",draggable:"false"},"实时客流",m.default.createElement(T,{className:"fa-angle-double-right"}))),m.default.createElement("li",null,m.default.createElement(v.Link,{to:"statistics/total",activeClassName:"active",draggable:"false"},"入店量 ",m.default.createElement(T,{className:"fa-angle-double-right"}))),m.default.createElement("li",null,m.default.createElement(v.Link,{to:"statistics/avg",activeClassName:"active",draggable:"false"},"客流量 ",m.default.createElement(T,{className:"fa-angle-double-right"}))),m.default.createElement("li",null,m.default.createElement(v.Link,{to:"statistics/peak",activeClassName:"active",draggable:"false"},"客流峰值 ",m.default.createElement(T,{className:"fa-angle-double-right"}))),m.default.createElement("li",null,m.default.createElement(v.Link,{to:"statistics/oldOrNew",activeClassName:"active",draggable:"false"},"新老顾客",m.default.createElement(T,{className:"fa-angle-double-right"}))),m.default.createElement("li",null,m.default.createElement(v.Link,{to:"statistics/stay",activeClassName:"active",draggable:"false"},"停留时长",m.default.createElement(T,{className:"fa-angle-double-right"}))),m.default.createElement("li",null,m.default.createElement(v.Link,{to:"statistics/deep",activeClassName:"active",draggable:"false"},"深访率",m.default.createElement(T,{className:"fa-angle-double-right"}))),m.default.createElement("li",null,m.default.createElement(v.Link,{to:"statistics/out",activeClassName:"active",draggable:"false"},"跳出率",m.default.createElement(T,{className:"fa-angle-double-right"}))),m.default.createElement("li",null,m.default.createElement(v.Link,{to:"statistics/active",activeClassName:"active",draggable:"false"},"顾客活跃度",m.default.createElement(T,{className:"fa-angle-double-right"}))),m.default.createElement("li",null,m.default.createElement(v.Link,{to:"statistics/timeSection",activeClassName:"active",draggable:"false"},"各时间段人数",m.default.createElement(T,{className:"fa-angle-double-right"}))),m.default.createElement("li",null,m.default.createElement(v.Link,{to:"statistics/cycle",activeClassName:"active",draggable:"false"},"来访周期",m.default.createElement(T,{className:"fa-angle-double-right"})))))}}]),t}(m.default.Component),y=function(e){function t(e){s(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.stateDefault=function(){a.setState({selectTime:"day",time:"day"})},a.changeTime=function(e){if(f.default.findDOMNode(a.refs.selectTime1).getElementsByClassName("calendar")[0].getElementsByTagName("input")[0].value,f.default.findDOMNode(a.refs.selectTime2).getElementsByClassName("calendar")[0].getElementsByTagName("input")[0].value,f.default.findDOMNode(a.refs.selectTime1).className=f.default.findDOMNode(a.refs.selectTime1).className.replace(" selectTimeError",""),f.default.findDOMNode(a.refs.selectTime2).className=f.default.findDOMNode(a.refs.selectTime1).className.replace(" selectTimeError",""),"active"!==e.target.className)switch(e.target.innerText){case"昨天":return void a.setState({time:"day",selectTime:"day"});case"最近一周":return void a.setState({time:"week",selectTime:"week"});case"最近一月":return void a.setState({time:"month",selectTime:"month"});case"最近一年":return void a.setState({time:"year",selectTime:"year"});case"全部":a.setState({time:"more",selectTime:"more"})}},a.search=function(){var e=f.default.findDOMNode(a.refs.selectTime1).getElementsByClassName("calendar")[0].getElementsByTagName("input")[0].value,t=f.default.findDOMNode(a.refs.selectTime2).getElementsByClassName("calendar")[0].getElementsByTagName("input")[0].value;e=h.default.changeTime(e),t=h.default.changeTime(t),f.default.findDOMNode(a.refs.selectTime1).className=f.default.findDOMNode(a.refs.selectTime1).className.replace(" selectTimeError",""),f.default.findDOMNode(a.refs.selectTime2).className=f.default.findDOMNode(a.refs.selectTime1).className.replace(" selectTimeError","");var l=new Date(e).getTime(),s=new Date(t).getTime(),i=Date.now(),n=!1;if(l>i&&(f.default.findDOMNode(a.refs.selectTime1).className+=" selectTimeError",n=!0),l>=s&&(f.default.findDOMNode(a.refs.selectTime2).className+=" selectTimeError",n=!0),s>i&&(f.default.findDOMNode(a.refs.selectTime2).className+=" selectTimeError",n=!0),n)return!1;a.setState({time:e+","+t,selectTime:""})},a.state={selectTime:"day",time:"day",index:!1},a}return n(t,e),c(t,[{key:"componentWillMount",value:function(){location.href.indexOf("statistics/index")!=-1?this.setState({index:!0}):this.setState({index:!1})}},{key:"componentWillReceiveProps",value:function(e,t){e===this.props||this.state.index||(f.default.findDOMNode(this.refs.selectTime1).getElementsByClassName("calendar")[0].getElementsByTagName("input")[0].value,f.default.findDOMNode(this.refs.selectTime2).getElementsByClassName("calendar")[0].getElementsByTagName("input")[0].value,f.default.findDOMNode(this.refs.selectTime1).className=f.default.findDOMNode(this.refs.selectTime1).className.replace(" selectTimeError",""),f.default.findDOMNode(this.refs.selectTime2).className=f.default.findDOMNode(this.refs.selectTime1).className.replace(" selectTimeError","")),location.href.indexOf("statistics/index")!=-1?this.setState({index:!0}):this.setState({index:!1})}},{key:"componentDidMount",value:function(){scrollTo(0,0)}},{key:"render",value:function(){var e=this.state.index;return m.default.createElement("div",{id:"container"},m.default.createElement(p,null),!e&&m.default.createElement("div",{className:"chartWrapper"},m.default.createElement("div",{className:"selectOption inline"},"快速选择：",m.default.createElement("div",{className:"quickSelect"},m.default.createElement("ul",null,m.default.createElement("li",null,m.default.createElement("a",{className:"day"==this.state.selectTime?"active":"",onClick:this.changeTime},"昨天")),m.default.createElement("li",null,m.default.createElement("a",{className:"week"==this.state.selectTime?"active":"",onClick:this.changeTime},"最近一周")),m.default.createElement("li",null,m.default.createElement("a",{className:"month"==this.state.selectTime?"active":"",onClick:this.changeTime},"最近一月")),m.default.createElement("li",null,m.default.createElement("a",{className:"year"==this.state.selectTime?"active":"",onClick:this.changeTime},"最近一年")),m.default.createElement("li",null,m.default.createElement("a",{className:"more"==this.state.selectTime?"active":"",onClick:this.changeTime},"全部"))))),m.default.createElement("div",{className:"selectOption inline"},"自定义时间选择：",m.default.createElement("div",{className:"selectTime1",ref:"selectTime1"},m.default.createElement(E.default,null))," 至 ",m.default.createElement("div",{className:"selectTime1",ref:"selectTime2"},m.default.createElement(E.default,null)),m.default.createElement("div",{className:"selectClick"},m.default.createElement("input",{type:"button",value:"查询",onClick:this.search}))),this.props.children&&m.default.cloneElement(this.props.children,{time:this.state.time,stateDefault:this.stateDefault})),e&&m.default.createElement("div",null,this.props.children&&m.default.cloneElement(this.props.children,{time:this.state.time,stateDefault:this.stateDefault})))}}]),t}(m.default.Component);t.default=y},563:function(e,t,a){"use strict";function l(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,l=e.getDate();return t+"-"+a+"-"+(l-1)+","+t+"-"+a+"-"+l}function s(e){if(e){if(e.indexOf(",")>-1){var t=e.split(",");return s(t[0])+","+s(t[1])}var a=e.split("-");return a[1]=a[1]>=10?a[1]:"0"+a[1],a[2]=a[2]>=10?a[2]:"0"+a[2],a.join("-")}}Object.defineProperty(t,"__esModule",{value:!0}),t.default={getTime:l,changeTime:s}}});