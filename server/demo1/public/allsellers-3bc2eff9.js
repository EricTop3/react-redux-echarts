webpackJsonp([12],{252:function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,n,l){return n&&e(t.prototype,n),l&&e(t,l),t}}(),c=n(1),u=l(c),o=n(7),f=l(o),d=n(11),m=(l(d),n(13)),h=n(10),g=l(h),p=n(3),y=l(p),v=n(59),S=n(22),E=l(S),N=n(563),T=l(N);n(234),n(19),n(29),n(20),n(28),n(21),n(233);var C=n(562),I=l(C),L=n(236),O=n(235),b=n(27),w=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.resizeFun=function(){n.state.resizeHandler&&clearTimeout(n.state.resizeHandler),n.state.allSellersLineChart&&(n.state.resizeHandler=setTimeout(function(){n.state.allSellersLineChart.resize()},100))},n.changeTime=function(e){if("active"!==e.target.className)switch(e.target.innerText){case"昨天":return void n.setState({time:"day",selectTime:"day",chartPage:1});case"最近一周":return void n.setState({time:"week",selectTime:"week",chartPage:1});case"最近一月":return void n.setState({time:"month",selectTime:"month",chartPage:1});case"最近一年":return void n.setState({time:"year",selectTime:"year",chartPage:1});case"全部":n.setState({time:"more",selectTime:"more",chartPage:1})}},n.search=function(){var e=f.default.findDOMNode(n.refs.selectTime1).getElementsByClassName("calendar")[0].getElementsByTagName("input")[0].value,t=f.default.findDOMNode(n.refs.selectTime2).getElementsByClassName("calendar")[0].getElementsByTagName("input")[0].value;e=T.default.changeTime(e),t=T.default.changeTime(t),f.default.findDOMNode(n.refs.selectTime1).className=f.default.findDOMNode(n.refs.selectTime1).className.replace(" selectTimeError",""),f.default.findDOMNode(n.refs.selectTime2).className=f.default.findDOMNode(n.refs.selectTime1).className.replace(" selectTimeError","");var l=new Date(e).getTime(),a=new Date(t).getTime(),r=Date.now(),i=!1;if(l>r&&(f.default.findDOMNode(n.refs.selectTime1).className+=" selectTimeError",i=!0),l>=a&&(f.default.findDOMNode(n.refs.selectTime2).className+=" selectTimeError",i=!0),a>r&&(f.default.findDOMNode(n.refs.selectTime2).className+=" selectTimeError",i=!0),i)return!1;n.setState({time:e+","+t,selectTime:"",chartPage:1})},n.turnLeft=function(){n.state.chartPage<=1||(n.state.chartPage-=1,n.props.allSellersLineChartInit(n.state.time,n.state.chartPage))},n.turnRight=function(){n.state.lastPage||(n.state.chartPage+=1,n.props.allSellersLineChartInit(n.state.time,n.state.chartPage))},n.state={allSellersLineChart:"",chartPage:1,lastPage:!1,resizeHandler:null,Data:[],selectTime:"day",time:"day"},n}return i(t,e),s(t,[{key:"componentWillMount",value:function(){this.props.allSellersLineChartInit(this.state.time,this.state.chartPage)}},{key:"componentDidMount",value:function(){var e=f.default.findDOMNode(this.refs.allSellersLineChart);this.state.allSellersLineChart=y.default.init(e),this.state.allSellersLineChart.showLoading(),window.addEventListener("resize",this.resizeFun)}},{key:"componentWillUnmount",value:function(){this.state.allSellersLineChart.dispose(),window.removeEventListener("resize",this.resizeFun)}},{key:"componentWillUpdate",value:function(e,t){this.state.time!==t.time&&this.props.allSellersLineChartInit(t.time,t.chartPage),this.state.Data=e.lineAndBar.toJS(),this.state.allSellersLineChart.setOption(this.state.Data),this.state.allSellersLineChart.hideLoading();var n=f.default.findDOMNode(this.refs.rightBtn);this.state.Data.xAxis[0].lastPage?(this.state.lastPage=!0,n.style.backgroundColor="#fff"):(n.style.backgroundColor="#eee",this.state.lastPage=!1)}},{key:"render",value:function(){var e=[];if(this.state.Data.series&&this.state.Data.series[0].data){var t=this.state.Data.xAxis[0].data,n=this.state.Data.series[0].data,l=this.state.Data.series[1].data;t.forEach(function(t,a){e.push(u.default.createElement("tr",{key:a},u.default.createElement("th",null,a+1),u.default.createElement("td",null,u.default.createElement(v.Link,{to:"sellers/"+t},t)),u.default.createElement("td",null,n[a],l[a]>0?u.default.createElement("span",{className:"up"}," ↑"):u.default.createElement("span",{className:"down"}," ↓")),u.default.createElement("td",{className:l[a]>0?"up":"down"},l[a],"%")))})}return u.default.createElement("div",{className:"chartWrapper"},u.default.createElement("div",{className:"selectOption inline"},"快速选择：",u.default.createElement("div",{className:"quickSelect"},u.default.createElement("ul",null,u.default.createElement("li",null,u.default.createElement("a",{className:"day"==this.state.selectTime?"active":"",onClick:this.changeTime},"昨天")),u.default.createElement("li",null,u.default.createElement("a",{className:"week"==this.state.selectTime?"active":"",onClick:this.changeTime},"最近一周")),u.default.createElement("li",null,u.default.createElement("a",{className:"month"==this.state.selectTime?"active":"",onClick:this.changeTime},"最近一月")),u.default.createElement("li",null,u.default.createElement("a",{className:"year"==this.state.selectTime?"active":"",onClick:this.changeTime},"最近一年")),u.default.createElement("li",null,u.default.createElement("a",{className:"more"==this.state.selectTime?"active":"",onClick:this.changeTime},"全部"))))),u.default.createElement("div",{className:"selectOption inline"},"自定义时间选择：",u.default.createElement("div",{className:"selectTime1",ref:"selectTime1"},u.default.createElement(E.default,null))," 至 ",u.default.createElement("div",{className:"selectTime1",ref:"selectTime2"},u.default.createElement(E.default,null)),u.default.createElement("div",{className:"selectClick"},u.default.createElement("input",{type:"button",value:"查询",onClick:this.search}))),u.default.createElement("div",{className:"panel"},u.default.createElement("div",{className:"panelHead"},"入店量环比 ",u.default.createElement(b,{className:"questionMark"}),u.default.createElement("div",{className:"messageMark"},u.default.createElement("p",null,"展示商城各商家一定时间的入店量及环比增幅",u.default.createElement("br",null),u.default.createElement("strong",null,"入店量"),"：一定时间内进入商城的人数",u.default.createElement("br",null),u.default.createElement("strong",null,"环比增幅"),"：指与历史同时期比较。环比增长速度=（本期数－上期数）/上期数*100% 反映本期比上期增长了多少 环比发展速度=本期数/上期数*100% 反映本期比上期增长多少"))),u.default.createElement("div",{className:"panelBody"},u.default.createElement("div",{className:"allSellersLineChartBtn"},u.default.createElement("button",{onClick:this.turnLeft},u.default.createElement(O,null)),u.default.createElement("button",{onClick:this.turnRight,ref:"rightBtn"},u.default.createElement(L,null))),u.default.createElement("div",{ref:"allSellersLineChart",className:"allSellersLineChart"}))),u.default.createElement("div",{className:"panel"},u.default.createElement("div",{className:"panelHead"},"商家排名明细"),u.default.createElement("div",{className:"panelBody"},u.default.createElement("table",{className:"Table"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,"排名"),u.default.createElement("th",null,"商店名称"),u.default.createElement("th",null,"平均客流"),u.default.createElement("th",null,"环比增幅"))),u.default.createElement("tbody",null,e.reverse())))))}}]),t}(u.default.Component);w.propTypes={allSellersLineChartInit:u.default.PropTypes.func.isRequired,lineAndBar:u.default.PropTypes.instanceOf(g.default.Map),table:u.default.PropTypes.instanceOf(g.default.List)};var D=function(e){return{lineAndBar:e.getIn(["b","lineAndBar"])}};t.default=(0,m.connect)(D,I.default)(w)},562:function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(128),r=l(a),i=n(46),s=l(i),c=s.default.sellers,u=r.default.sellers,o={sellersListInit:function(){return function(e){fetch(u.sellersListInit+"/").then(function(e){return e.json()}).then(function(t){e({type:c.sellersListInit,payload:t})}).catch(function(e){console.log(e)})}},allSellersLineChartInit:function(e,t){return function(n){var l=u.allSellersLineChartInit+e+"/"+t+"/";fetch(l).then(function(e){return e.json()}).then(function(e){n({type:c.allSellersLineChartInit,payload:e})}).catch(function(e){console.log(e)})}},singleSellerLineChartInit:function(e,t){return function(n){var l=u.singleSellerLineChartInit+e+"/"+t+"/";fetch(l).then(function(e){return e.json()}).then(function(e){n({type:c.singleSellerLineChartInit,payload:e})}).catch(function(e){console.log(e)})}},singleSellerCustomerNumInit:function(e){return function(t){var n=u.singleSellerCustomerNumInit+e+"/";fetch(n).then(function(e){return e.json()}).then(function(e){t({type:c.singleSellerCustomerNumInit,payload:e})}).catch(function(e){console.log(e)})}},singleSellerCustomerNumFetch:function(e){var t=u.singleSellerCustomerNumFetch+e+"/";return function(e){fetch(t).then(function(e){return e.json()}).then(function(t){e({type:c.singleSellerCustomerNumFetch,payload:t})}).catch(function(e){console.log(e)})}},singleSellerCustomerAvgInit:function(e,t){var n=u.singleSellerCustomerAvgInit+e+"/"+t+"/";return function(e){fetch(n).then(function(e){return e.json()}).then(function(t){e({type:c.singleSellerCustomerAvgInit,payload:t})}).catch(function(e){console.log(e)})}},singleSellerCustomerFlowInit:function(e,t){var n=u.singleSellerCustomerFlowInit+e+"/"+t+"/";return function(e){fetch(n).then(function(e){return e.json()}).then(function(t){e({type:c.singleSellerCustomerFlowInit,payload:t})}).catch(function(e){console.log(e)})}},singleSellerCustomerInInit:function(e,t){var n=u.singleSellerCustomerInInit+e+"/"+t+"/";return function(e){fetch(n).then(function(e){return e.json()}).then(function(t){e({type:c.singleSellerCustomerInInit,payload:t})}).catch(function(e){console.log(e)})}},singleSellerRadar:function(e){var t=u.singleSellerRadar+e+"/";return function(e){fetch(t).then(function(e){return e.json()}).then(function(t){e({type:c.singleSellerRadar,payload:t})}).catch(function(e){console.log(e)})}},singleSellerStayBar:function(e,t){var n=u.singleSellerStayBar+e+"/"+t+"/";return function(e){fetch(n).then(function(e){return e.json()}).then(function(t){e({type:c.singleSellerStayBar,payload:t})}).catch(function(e){console.log(e)})}},singleSellerOldOrNew:function(e,t){var n=u.singleSellerOldOrNew+e+"/"+t+"/";return function(e){fetch(n).then(function(e){return e.json()}).then(function(t){e({type:c.singleSellerOldOrNew,payload:t})}).catch(function(e){console.log(e)})}},singleSellerTimeSection:function(e,t){var n=u.singleSellerTimeSection+e+"/"+t+"/";return function(e){fetch(n).then(function(e){return e.json()}).then(function(t){e({type:c.singleSellerTimeSection,payload:t})}).catch(function(e){console.log(e)})}},singleSellerDeepVisit:function(e,t){var n=u.singleSellerDeepVisit+e+"/"+t+"/";return function(e){fetch(n).then(function(e){return e.json()}).then(function(t){e({type:c.singleSellerDeepVisit,payload:t})}).catch(function(e){console.log(e)})}},singleSellerCycleInit:function(e,t){var n=u.singleSellerCycleInit+e+"/"+t+"/";return function(e){fetch(n).then(function(e){return e.json()}).then(function(t){e({type:c.singleSellerCycleInit,payload:t})}).catch(function(e){console.log(e)})}},singleSellerActiveInit:function(e,t){var n=u.singleSellerActiveInit+e+"/"+t+"/";return function(e){fetch(n).then(function(e){return e.json()}).then(function(t){e({type:c.singleSellerActiveInit,payload:t})}).catch(function(e){console.log(e)})}}};t.default=o},563:function(e,t,n){"use strict";function l(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,l=e.getDate();return t+"-"+n+"-"+(l-1)+","+t+"-"+n+"-"+l}function a(e){if(e){if(e.indexOf(",")>-1){var t=e.split(",");return a(t[0])+","+a(t[1])}var n=e.split("-");return n[1]=n[1]>=10?n[1]:"0"+n[1],n[2]=n[2]>=10?n[2]:"0"+n[2],n.join("-")}}Object.defineProperty(t,"__esModule",{value:!0}),t.default={getTime:l,changeTime:a}}});